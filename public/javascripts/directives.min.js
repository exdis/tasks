/* exdisme - v0.0.1 - 2014-05-31 */
define(["angular","services"],function(a){"use strict";a.module("app.directives",["app.services"]).directive("uiPagination",function(){return{restrict:"EA",replace:!0,template:'<ul class="pagination"><li ng-class="{disabled: !hasPrev()}" ng-click="prev()"><a>&laquo;</a></li><li ng-repeat="page in pages"ng-class="{active: isCurrent(page)}"ng-click="setCurrent(page)"><a>{{page}}</a></li><li ng-class="{disabled: !hasNext()}" ng-click="next()"><a>&raquo;</a></li></ul>',scope:{cur:"=",total:"=",display:"@",init:"&"},link:function(a){var b=function(){var b=+a.display,c=Math.floor(b/2);a.start=a.cur-c,a.start<1&&(a.start=1),a.end=a.start+b-1,a.end>a.total&&(a.end=a.total,a.start=a.end-(b-1),a.start<1&&(a.start=1)),a.pages=[];for(var d=a.start;d<=a.end;++d)a.pages.push(d)};a.$watch("cur",b),a.$watch("total",b),a.$watch("display",b),a.isCurrent=function(b){return a.cur===b},a.setCurrent=function(b){a.cur=b,a.init({page:b})},a.hasPrev=function(){return a.cur>1},a.prev=function(){a.hasPrev()&&(a.cur--,a.init({page:a.cur}))},a.hasNext=function(){return a.cur<a.total},a.next=function(){a.hasNext()&&(a.cur++,a.init({page:a.cur}))},a.firstPage=function(){return 1===a.start},a.goToFirstPage=function(){a.firstPage()||(a.cur=1)},a.lastPage=function(){return a.end===a.total},a.goToLastPage=function(){a.lastPage()||(a.cur=a.total)}}}}).directive("loading",function(){return{restrict:"E",replace:!0,template:'<div class="loading"><img src="img/loader.gif"></div>',link:function(a,b){a.$watch("loading",function(a){a?$(b).show():$(b).hide()})}}})});