/* exdisme - v0.0.1 - 2014-05-03 */
define(["angular","services","jquery","moment"],function(a,b,c,d){"use strict";var e=a.module("app.controllers",["app.services"]);e.controller("ctrl",["$scope","Tasks","$http","$route",function(a,b,e,f){"undefined"!=typeof a.currentUser&&(a.tasks=b.get(a.currentUser)),a.submit=function(){var b=a.form,g=d(b.time,["H m s"]);if(g.isValid()){var h=d.duration({hours:g.hour(),minutes:g.minute(),seconds:g.second()});b.time=h.asMilliseconds(),b.userid=a.currentUser,e.post("api/tasks",JSON.stringify(b)).success(function(a){"OK"===a.status&&(c("#new").modal("hide"),c(".navbar-collapse").hasClass("in")&&c(".navbar-toggle").click(),f.reload())})}},a.taskDelete=function(a){e.delete("api/tasks/"+a),c(".navbar-collapse").hasClass("in")&&c(".navbar-toggle").click(),f.reload()}}])});