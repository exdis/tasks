/* exdisme - v0.0.1 - 2014-05-03 */
define(["angular","services","jquery","moment"],function(a,b,c,d){"use strict";var e=a.module("app.controllers",["app.services"]);e.controller("ctrl",["$scope","Tasks","$http","$route",function(a,b,e,f){"undefined"!=typeof a.currentUser&&(a.tasks=b.get(a.currentUser)),a.submit=function(){var b=a.form,g=b.time.match(/\d+h/),h=b.time.match(/\d+m/),i=b.time.match(/\d+s/);console.log(g);var j=d.duration({hours:g?parseInt(g[0].replace("h","")):0,minutes:h?parseInt(h[0].replace("m","")):0,seconds:i?parseInt(i[0].replace("s","")):0});b.time=j.asMilliseconds(),b.userid=a.currentUser,e.post("api/tasks",JSON.stringify(b)).success(function(b){"OK"===b.status&&(c("#new").modal("hide"),c(".navbar-collapse").hasClass("in")&&c(".navbar-toggle").click(),f.reload(),a.form={})})},a.taskDelete=function(a){e.delete("api/tasks/"+a),c(".navbar-collapse").hasClass("in")&&c(".navbar-toggle").click(),f.reload()}}])});